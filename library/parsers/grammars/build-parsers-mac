#!/bin/bash

if [ $# -lt 1 ]
then
  echo "Usage: $0 [antlr|mysql|python|js]"
  exit
fi

LOCATION=../../../../mysql-mac-res/bin/antlr-4.5.4-complete.jar
case "$1" in
  "antlr") echo "Building ANTLR parser"
    java -jar $LOCATION -Dlanguage=Cpp -listener -no-visitor -o ../antlr -package parsers ANTLRv4Parser.g4 ANTLRv4Lexer.g4
  ;;
 "mysql") echo "Building MySQL parser"
   java -Xmx1024m -jar ../../../../mysql-mac-res/bin/antlr-3.4-complete.jar -make MySQL.g -o .. -Xmaxswitchcaselabels=30
   java -Xmx1024m -jar ../../../../mysql-mac-res/bin/antlr-3.4-complete.jar -make MySQLSimpleParser.g -o .. -Xmaxswitchcaselabels=30
 ;;
 *) echo "Unknown parser type $1"
 exit 1
 ;;
esac

